var I=Object.defineProperty;var z=(s,u)=>I(s,"name",{value:u,configurable:!0});var F={Init(s,u=0,l=0){var y,S,m,w,k,x,M;this.app_id=s,this.cipher=u,this.medalDisplayTime=5,this.showPopups=1,this.showDescriptions=1,this.points=[5,10,25,50,100],this.displayMedalQueue=[],this.debug=l;let o=new URL(window.location.href);this.session_id=(y=o.searchParams.get("ngio_session_id"))!=null?y:0;let a=this.Call("ScoreBoard.getBoards",0,0);this.scoreboards=(w=(m=(S=a==null?void 0:a.result)==null?void 0:S.data)==null?void 0:m.scoreboards)!=null?w:[];let v=this.Call("Medal.getList",0,0);this.medals=(M=(x=(k=v==null?void 0:v.result)==null?void 0:k.data)==null?void 0:x.medals)!=null?M:[];for(let i of this.medals)i.image=new Image,i.image.src=i.icon,this.debug&&(i.unlocked=0)},Update(s){var u;if((u=this.displayMedalQueue)==null?void 0:u.length){let l=this.displayMedalQueue[0];l.time+=s,l.time>this.medalDisplayTime&&this.displayMedalQueue.shift()}},Render(s,u=50){var l;if((l=this.displayMedalQueue)==null?void 0:l.length){let o=this.displayMedalQueue[0],a=o.time<1?1-o.time:0,v=o.time>this.medalDisplayTime-1?this.medalDisplayTime-o.time:1,y=s.canvas.height+a*u*1.5;this.RenderMedal(s,o.index,0,y-u,u,v)}},RenderMedal(s,u,l,o,a,v=.5){if(!this.medals||!this.medals.find(w=>w.id==u))return;s.save(),s.fillStyle="#fff",s.strokeStyle="#000",s.shadowColor="#000",s.textBaseline="middle",s.textAlign="left",s.font=a/2+"px impact",s.lineWidth=a/35,s.shadowBlur=a/5,s.globalAlpha=v;let y=this.medals.find(w=>w.id==u);s.drawImage(y.image,l,o,a,a),s.strokeRect(l,o,a,a);let S=this.points[y.difficulty-1],m=this.GetMedalDisplayText(y);s.lineWidth=Math.max(1,a/26),s.strokeText(m,l+a*1.2,o+a/2),s.fillText(m,l+a*1.2,o+a/2),s.restore()},UnlockMedal(s){if(!this.medals||!this.medals.find(l=>l.id==s))return;let u=this.medals.find(l=>l.id==s);u.unlocked||(u.unlocked=!0,this.Call("Medal.unlock",{id:u.id}))},PostScore(s,u){if(!this.scoreboards||!this.scoreboards.find(o=>o.id==s))return;let l=this.scoreboards.find(o=>o.id==s);this.Call("ScoreBoard.postScore",{id:l.id,value:u})},GetScores(s,u=0,l="A",o=0,a=0,v=10){var m,w;if(!this.scoreboards||!this.scoreboards.find(k=>k.id==s))return;let y=this.scoreboards.find(k=>k.id==s);return(w=(m=this.Call("ScoreBoard.getScores",{id:y.id,user:u,period:l,social:o,skip:a,limit:v},0).result)==null?void 0:m.data)==null?void 0:w.scores},Username(){var u,l,o,a;let s=this.Call("App.checkSession");return(a=(o=(l=(u=s==null?void 0:s.result)==null?void 0:u.data)==null?void 0:l.session)==null?void 0:o.user)==null?void 0:a.name},Version(){var u,l;let s=this.Call("App.getCurrentVersion");return(l=(u=s==null?void 0:s.result)==null?void 0:u.data)==null?void 0:l.current_version},IsSupporter(){var u,l,o,a;let s=this.Call("App.checkSession");return(a=(o=(l=(u=s==null?void 0:s.result)==null?void 0:u.data)==null?void 0:l.session)==null?void 0:o.user)==null?void 0:a.supporter},Call(s,u=0,l=1){let o=this.EncryptCall({component:s,parameters:u}),a={app_id:this.app_id,session_id:this.session_id,call:o},v=new FormData;v.append("input",JSON.stringify(a));let y=new XMLHttpRequest,S="https://newgrounds.io/gateway_v3.php";if(y.open("POST",S,this.debug?0:l),y.send(v),y.responseText)return this.debug&&console.log(y.responseText),this.responseText=y.responseText,JSON.parse(y.responseText)},EncryptCall(s){if(!this.cipher)return s;let u=this.CryptoJS.enc.Base64.parse(this.cipher),l=this.CryptoJS.lib.WordArray.random(16),o=this.CryptoJS.AES.encrypt(JSON.stringify(s),u,{iv:l}),a=this.CryptoJS.enc.Base64.stringify(l.concat(o.ciphertext));return s.secure=a,s.parameters=null,s}};(function(s,u){typeof exports=="object"?module.exports=exports=u():typeof define=="function"&&define.amd?define([],u):F.CryptoJS=u()})(0,function(){var s=s||function(u,l){var o;if(typeof window!="undefined"&&window.crypto&&(o=window.crypto),!o&&typeof window!="undefined"&&window.msCrypto&&(o=window.msCrypto),!o&&typeof global!="undefined"&&global.crypto&&(o=global.crypto),!o&&typeof require=="function")try{o=require("crypto")}catch(i){}var a=z(function(){if(o){if(typeof o.getRandomValues=="function")try{return o.getRandomValues(new Uint32Array(1))[0]}catch(i){}if(typeof o.randomBytes=="function")try{return o.randomBytes(4).readInt32LE()}catch(i){}}throw new Error("Native crypto module could not be used to get secure random number.")},"i"),v=Object.create||function(){function i(){}return z(i,"t"),function(f){var _;return i.prototype=f,_=new i,i.prototype=null,_}}(),y={},S=y.lib={},m=S.Base={extend:function(i){var f=v(this);return i&&f.mixIn(i),f.hasOwnProperty("init")&&this.init!==f.init||(f.init=function(){f.$super.init.apply(this,arguments)}),f.init.prototype=f,f.$super=this,f},create:function(){var i=this.extend();return i.init.apply(i,arguments),i},init:function(){},mixIn:function(i){for(var f in i)i.hasOwnProperty(f)&&(this[f]=i[f]);i.hasOwnProperty("toString")&&(this.toString=i.toString)},clone:function(){return this.init.prototype.extend(this)}},w=S.WordArray=m.extend({init:function(i,f){i=this.words=i||[],this.sigBytes=f!=null?f:4*i.length},toString:function(i){return(i||Hex).stringify(this)},concat:function(i){var f=this.words,_=i.words,h=this.sigBytes,p=i.sigBytes;if(this.clamp(),h%4)for(var c=0;c<p;c++){var B=_[c>>>2]>>>24-c%4*8&255;f[h+c>>>2]|=B<<24-(h+c)%4*8}else for(c=0;c<p;c+=4)f[h+c>>>2]=_[c>>>2];return this.sigBytes+=p,this},clamp:function(){var i=this.words,f=this.sigBytes;i[f>>>2]&=4294967295<<32-f%4*8,i.length=u.ceil(f/4)},clone:function(){var i=m.clone.call(this);return i.words=this.words.slice(0),i},random:function(i){for(var f=[],_=0;_<i;_+=4)f.push(a());return new w.init(f,i)}}),k=y.enc={},x=k.Latin1={stringify:function(i){for(var f=i.words,_=i.sigBytes,h=[],p=0;p<_;p++){var c=f[p>>>2]>>>24-p%4*8&255;h.push(String.fromCharCode(c))}return h.join("")},parse:function(i){for(var f=i.length,_=[],h=0;h<f;h++)_[h>>>2]|=(255&i.charCodeAt(h))<<24-h%4*8;return new w.init(_,f)}},M=k.Utf8={stringify:function(i){try{return decodeURIComponent(escape(x.stringify(i)))}catch(f){throw new Error("Malformed UTF-8 data")}},parse:function(i){return x.parse(unescape(encodeURIComponent(i)))}};return S.BufferedBlockAlgorithm=m.extend({reset:function(){this._data=new w.init,this._nDataBytes=0},_append:function(i){typeof i=="string"&&(i=M.parse(i)),this._data.concat(i),this._nDataBytes+=i.sigBytes},_process:function(i){var f,_=this._data,h=_.words,p=_.sigBytes,c=this.blockSize,B=p/(4*c),e=(B=i?u.ceil(B):u.max((0|B)-this._minBufferSize,0))*c,r=u.min(4*e,p);if(e){for(var d=0;d<e;d+=c)this._doProcessBlock(h,d);f=h.splice(0,e),_.sigBytes-=r}return new w.init(f,r)},clone:function(){var i=m.clone.call(this);return i._data=this._data.clone(),i},_minBufferSize:0}),y.algo={},y}(Math);return function(){var u=s,l=u.lib.WordArray;u.enc.Base64={stringify:function(o){var a=o.words,v=o.sigBytes,y=this._map;o.clamp();for(var S=[],m=0;m<v;m+=3)for(var w=(a[m>>>2]>>>24-m%4*8&255)<<16|(a[m+1>>>2]>>>24-(m+1)%4*8&255)<<8|a[m+2>>>2]>>>24-(m+2)%4*8&255,k=0;k<4&&m+.75*k<v;k++)S.push(y.charAt(w>>>6*(3-k)&63));var x=y.charAt(64);if(x)for(;S.length%4;)S.push(x);return S.join("")},parse:function(o){var a=o.length,v=this._map,y=this._reverseMap;if(!y){y=this._reverseMap=[];for(var S=0;S<v.length;S++)y[v.charCodeAt(S)]=S}var m=v.charAt(64);if(m){var w=o.indexOf(m);w!==-1&&(a=w)}return function(k,x,M){for(var i=[],f=0,_=0;_<x;_++)if(_%4){var h=M[k.charCodeAt(_-1)]<<_%4*2,p=M[k.charCodeAt(_)]>>>6-_%4*2,c=h|p;i[f>>>2]|=c<<24-f%4*8,f++}return l.create(i,f)}(o,a,y)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),s.lib.Cipher||function(u){var l=s,o=l.lib,a=o.Base,v=o.WordArray,y=o.BufferedBlockAlgorithm,S=l.enc,m=(S.Utf8,S.Base64),w=l.algo.EvpKDF,k=o.Cipher=y.extend({cfg:a.extend(),createEncryptor:function(e,r){return this.create(this._ENC_XFORM_MODE,e,r)},createDecryptor:function(e,r){return this.create(this._DEC_XFORM_MODE,e,r)},init:function(e,r,d){this.cfg=this.cfg.extend(d),this._xformMode=e,this._key=r,this.reset()},reset:function(){y.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(r){return typeof r=="string"?B:p}return z(e,"t"),function(r){return{encrypt:function(d,t,n){return e(t).encrypt(r,d,t,n)},decrypt:function(d,t,n){return e(t).decrypt(r,d,t,n)}}}}()}),x=(o.StreamCipher=k.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),l.mode={}),M=o.BlockCipherMode=a.extend({createEncryptor:function(e,r){return this.Encryptor.create(e,r)},createDecryptor:function(e,r){return this.Decryptor.create(e,r)},init:function(e,r){this._cipher=e,this._iv=r}}),i=x.CBC=function(){var e=M.extend();function r(d,t,n){var g,C=this._iv;C?(g=C,this._iv=u):g=this._prevBlock;for(var b=0;b<n;b++)d[t+b]^=g[b]}return z(r,"r"),e.Encryptor=e.extend({processBlock:function(d,t){var n=this._cipher,g=n.blockSize;r.call(this,d,t,g),n.encryptBlock(d,t),this._prevBlock=d.slice(t,t+g)}}),e.Decryptor=e.extend({processBlock:function(d,t){var n=this._cipher,g=n.blockSize,C=d.slice(t,t+g);n.decryptBlock(d,t),r.call(this,d,t,g),this._prevBlock=C}}),e}(),f=(l.pad={}).Pkcs7={pad:function(e,r){for(var d=4*r,t=d-e.sigBytes%d,n=t<<24|t<<16|t<<8|t,g=[],C=0;C<t;C+=4)g.push(n);var b=v.create(g,t);e.concat(b)},unpad:function(e){var r=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=r}},_=(o.BlockCipher=k.extend({cfg:k.cfg.extend({mode:i,padding:f}),reset:function(){var e;k.reset.call(this);var r=this.cfg,d=r.iv,t=r.mode;this._xformMode==this._ENC_XFORM_MODE?e=t.createEncryptor:(e=t.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,d&&d.words):(this._mode=e.call(t,this,d&&d.words),this._mode.__creator=e)},_doProcessBlock:function(e,r){this._mode.processBlock(e,r)},_doFinalize:function(){var e,r=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(r.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),r.unpad(e)),e},blockSize:4}),o.CipherParams=a.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),h=(l.format={}).OpenSSL={stringify:function(e){var r=e.ciphertext,d=e.salt;return(d?v.create([1398893684,1701076831]).concat(d).concat(r):r).toString(m)},parse:function(e){var r,d=m.parse(e),t=d.words;return t[0]==1398893684&&t[1]==1701076831&&(r=v.create(t.slice(2,4)),t.splice(0,4),d.sigBytes-=16),_.create({ciphertext:d,salt:r})}},p=o.SerializableCipher=a.extend({cfg:a.extend({format:h}),encrypt:function(e,r,d,t){t=this.cfg.extend(t);var n=e.createEncryptor(d,t),g=n.finalize(r),C=n.cfg;return _.create({ciphertext:g,key:d,iv:C.iv,algorithm:e,mode:C.mode,padding:C.padding,blockSize:e.blockSize,formatter:t.format})},decrypt:function(e,r,d,t){return t=this.cfg.extend(t),r=this._parse(r,t.format),e.createDecryptor(d,t).finalize(r.ciphertext)},_parse:function(e,r){return typeof e=="string"?r.parse(e,this):e}}),c=(l.kdf={}).OpenSSL={execute:function(e,r,d,t){t||(t=v.random(8));var n=w.create({keySize:r+d}).compute(e,t),g=v.create(n.words.slice(r),4*d);return n.sigBytes=4*r,_.create({key:n,iv:g,salt:t})}},B=o.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:c}),encrypt:function(e,r,d,t){var n=(t=this.cfg.extend(t)).kdf.execute(d,e.keySize,e.ivSize);t.iv=n.iv;var g=p.encrypt.call(this,e,r,n.key,t);return g.mixIn(n),g},decrypt:function(e,r,d,t){t=this.cfg.extend(t),r=this._parse(r,t.format);var n=t.kdf.execute(d,e.keySize,e.ivSize,r.salt);return t.iv=n.iv,p.decrypt.call(this,e,r,n.key,t)}})}(),function(){var u=s,l=u.lib.BlockCipher,o=u.algo,a=[],v=[],y=[],S=[],m=[],w=[],k=[],x=[],M=[],i=[];(function(){for(var h=[],p=0;p<256;p++)h[p]=p<128?p<<1:p<<1^283;var c=0,B=0;for(p=0;p<256;p++){var e=B^B<<1^B<<2^B<<3^B<<4;e=e>>>8^255&e^99,a[c]=e,v[e]=c;var r=h[c],d=h[r],t=h[d],n=257*h[e]^16843008*e;y[c]=n<<24|n>>>8,S[c]=n<<16|n>>>16,m[c]=n<<8|n>>>24,w[c]=n,n=16843009*t^65537*d^257*r^16843008*c,k[e]=n<<24|n>>>8,x[e]=n<<16|n>>>16,M[e]=n<<8|n>>>24,i[e]=n,c?(c=r^h[h[h[t^r]]],B^=h[h[B]]):c=B=1}})();var f=[0,1,2,4,8,16,32,64,128,27,54],_=o.AES=l.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var h=this._keyPriorReset=this._key,p=h.words,c=h.sigBytes/4,B=4*((this._nRounds=c+6)+1),e=this._keySchedule=[],r=0;r<B;r++)r<c?e[r]=p[r]:(n=e[r-1],r%c?c>6&&r%c==4&&(n=a[n>>>24]<<24|a[n>>>16&255]<<16|a[n>>>8&255]<<8|a[255&n]):(n=a[(n=n<<8|n>>>24)>>>24]<<24|a[n>>>16&255]<<16|a[n>>>8&255]<<8|a[255&n],n^=f[r/c|0]<<24),e[r]=e[r-c]^n);for(var d=this._invKeySchedule=[],t=0;t<B;t++){if(r=B-t,t%4)var n=e[r];else n=e[r-4];d[t]=t<4||r<=4?n:k[a[n>>>24]]^x[a[n>>>16&255]]^M[a[n>>>8&255]]^i[a[255&n]]}}},encryptBlock:function(h,p){this._doCryptBlock(h,p,this._keySchedule,y,S,m,w,a)},decryptBlock:function(h,p){var c=h[p+1];h[p+1]=h[p+3],h[p+3]=c,this._doCryptBlock(h,p,this._invKeySchedule,k,x,M,i,v),c=h[p+1],h[p+1]=h[p+3],h[p+3]=c},_doCryptBlock:function(h,p,c,B,e,r,d,t){for(var n=this._nRounds,g=h[p]^c[0],C=h[p+1]^c[1],b=h[p+2]^c[2],E=h[p+3]^c[3],D=4,T=1;T<n;T++){var O=B[g>>>24]^e[C>>>16&255]^r[b>>>8&255]^d[255&E]^c[D++],A=B[C>>>24]^e[b>>>16&255]^r[E>>>8&255]^d[255&g]^c[D++],R=B[b>>>24]^e[E>>>16&255]^r[g>>>8&255]^d[255&C]^c[D++],P=B[E>>>24]^e[g>>>16&255]^r[C>>>8&255]^d[255&b]^c[D++];g=O,C=A,b=R,E=P}O=(t[g>>>24]<<24|t[C>>>16&255]<<16|t[b>>>8&255]<<8|t[255&E])^c[D++],A=(t[C>>>24]<<24|t[b>>>16&255]<<16|t[E>>>8&255]<<8|t[255&g])^c[D++],R=(t[b>>>24]<<24|t[E>>>16&255]<<16|t[g>>>8&255]<<8|t[255&C])^c[D++],P=(t[E>>>24]<<24|t[g>>>16&255]<<16|t[C>>>8&255]<<8|t[255&b])^c[D++],h[p]=O,h[p+1]=A,h[p+2]=R,h[p+3]=P},keySize:8});u.AES=l._createHelper(_)}(),s});module.exports=F;
//# sourceMappingURL=newgrounds.cjs.map
