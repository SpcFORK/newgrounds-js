var Y=Object.defineProperty;var S=(o,l)=>Y(o,"name",{value:l,configurable:!0});function $(o){(function(l,a){typeof exports=="object"?module.exports=exports=a():typeof define=="function"&&define.amd?define([],a):o.CryptoJS=a()})(0,function(){var l=l||function(a,y){var s;if(typeof window!="undefined"&&window.crypto&&(s=window.crypto),!s&&typeof window!="undefined"&&window.msCrypto&&(s=window.msCrypto),!s&&typeof global!="undefined"&&global.crypto&&(s=global.crypto),!s&&typeof require=="function")try{s=require("crypto")}catch(i){}var f=S(function(){if(s){if(typeof s.getRandomValues=="function")try{return s.getRandomValues(new Uint32Array(1))[0]}catch(i){}if(typeof s.randomBytes=="function")try{return s.randomBytes(4).readInt32LE()}catch(i){}}throw new Error("Native crypto module could not be used to get secure random number.")},"i"),m=Object.create||function(){function i(){}return S(i,"t"),function(h){var _;return i.prototype=h,_=new i,i.prototype=null,_}}(),x={},w=x.lib={},g=w.Base={extend:function(i){var h=m(this);return i&&h.mixIn(i),h.hasOwnProperty("init")&&this.init!==h.init||(h.init=function(){h.$super.init.apply(this,arguments)}),h.init.prototype=h,h.$super=this,h},create:function(){var i=this.extend();return i.init.apply(i,arguments),i},init:function(){},mixIn:function(i){for(var h in i)i.hasOwnProperty(h)&&(this[h]=i[h]);i.hasOwnProperty("toString")&&(this.toString=i.toString)},clone:function(){return this.init.prototype.extend(this)}},C=w.WordArray=g.extend({init:function(i,h){i=this.words=i||[],this.sigBytes=h!=null?h:4*i.length},toString:function(i){return(i||Hex).stringify(this)},concat:function(i){var h=this.words,_=i.words,u=this.sigBytes,p=i.sigBytes;if(this.clamp(),u%4)for(var c=0;c<p;c++){var k=_[c>>>2]>>>24-c%4*8&255;h[u+c>>>2]|=k<<24-(u+c)%4*8}else for(c=0;c<p;c+=4)h[u+c>>>2]=_[c>>>2];return this.sigBytes+=p,this},clamp:function(){var i=this.words,h=this.sigBytes;i[h>>>2]&=4294967295<<32-h%4*8,i.length=a.ceil(h/4)},clone:function(){var i=g.clone.call(this);return i.words=this.words.slice(0),i},random:function(i){for(var h=[],_=0;_<i;_+=4)h.push(f());return new C.init(h,i)}}),B=x.enc={},D=B.Latin1={stringify:function(i){for(var h=i.words,_=i.sigBytes,u=[],p=0;p<_;p++){var c=h[p>>>2]>>>24-p%4*8&255;u.push(String.fromCharCode(c))}return u.join("")},parse:function(i){for(var h=i.length,_=[],u=0;u<h;u++)_[u>>>2]|=(255&i.charCodeAt(u))<<24-u%4*8;return new C.init(_,h)}},E=B.Utf8={stringify:function(i){try{return decodeURIComponent(escape(D.stringify(i)))}catch(h){throw new Error("Malformed UTF-8 data")}},parse:function(i){return D.parse(unescape(encodeURIComponent(i)))}};return w.BufferedBlockAlgorithm=g.extend({reset:function(){this._data=new C.init,this._nDataBytes=0},_append:function(i){typeof i=="string"&&(i=E.parse(i)),this._data.concat(i),this._nDataBytes+=i.sigBytes},_process:function(i){var h,_=this._data,u=_.words,p=_.sigBytes,c=this.blockSize,k=p/(4*c),e=(k=i?a.ceil(k):a.max((0|k)-this._minBufferSize,0))*c,r=a.min(4*e,p);if(e){for(var d=0;d<e;d+=c)this._doProcessBlock(u,d);h=u.splice(0,e),_.sigBytes-=r}return new C.init(h,r)},clone:function(){var i=g.clone.call(this);return i._data=this._data.clone(),i},_minBufferSize:0}),x.algo={},x}(Math);return function(){var a=l,y=a.lib.WordArray;a.enc.Base64={stringify:function(s){var f=s.words,m=s.sigBytes,x=this._map;s.clamp();for(var w=[],g=0;g<m;g+=3)for(var C=(f[g>>>2]>>>24-g%4*8&255)<<16|(f[g+1>>>2]>>>24-(g+1)%4*8&255)<<8|f[g+2>>>2]>>>24-(g+2)%4*8&255,B=0;B<4&&g+.75*B<m;B++)w.push(x.charAt(C>>>6*(3-B)&63));var D=x.charAt(64);if(D)for(;w.length%4;)w.push(D);return w.join("")},parse:function(s){var f=s.length,m=this._map,x=this._reverseMap;if(!x){x=this._reverseMap=[];for(var w=0;w<m.length;w++)x[m.charCodeAt(w)]=w}var g=m.charAt(64);if(g){var C=s.indexOf(g);C!==-1&&(f=C)}return function(B,D,E){for(var i=[],h=0,_=0;_<D;_++)if(_%4){var u=E[B.charCodeAt(_-1)]<<_%4*2,p=E[B.charCodeAt(_)]>>>6-_%4*2,c=u|p;i[h>>>2]|=c<<24-h%4*8,h++}return y.create(i,h)}(s,f,x)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),l.lib.Cipher||function(a){var y=l,s=y.lib,f=s.Base,m=s.WordArray,x=s.BufferedBlockAlgorithm,w=y.enc,g=(w.Utf8,w.Base64),C=y.algo.EvpKDF,B=s.Cipher=x.extend({cfg:f.extend(),createEncryptor:function(e,r){return this.create(this._ENC_XFORM_MODE,e,r)},createDecryptor:function(e,r){return this.create(this._DEC_XFORM_MODE,e,r)},init:function(e,r,d){this.cfg=this.cfg.extend(d),this._xformMode=e,this._key=r,this.reset()},reset:function(){x.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(r){return typeof r=="string"?k:p}return S(e,"t"),function(r){return{encrypt:function(d,t,n){return e(t).encrypt(r,d,t,n)},decrypt:function(d,t,n){return e(t).decrypt(r,d,t,n)}}}}()}),D=(s.StreamCipher=B.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),y.mode={}),E=s.BlockCipherMode=f.extend({createEncryptor:function(e,r){return this.Encryptor.create(e,r)},createDecryptor:function(e,r){return this.Decryptor.create(e,r)},init:function(e,r){this._cipher=e,this._iv=r}}),i=D.CBC=function(){var e=E.extend();function r(d,t,n){var v,b=this._iv;b?(v=b,this._iv=a):v=this._prevBlock;for(var M=0;M<n;M++)d[t+M]^=v[M]}return S(r,"r"),e.Encryptor=e.extend({processBlock:function(d,t){var n=this._cipher,v=n.blockSize;r.call(this,d,t,v),n.encryptBlock(d,t),this._prevBlock=d.slice(t,t+v)}}),e.Decryptor=e.extend({processBlock:function(d,t){var n=this._cipher,v=n.blockSize,b=d.slice(t,t+v);n.decryptBlock(d,t),r.call(this,d,t,v),this._prevBlock=b}}),e}(),h=(y.pad={}).Pkcs7={pad:function(e,r){for(var d=4*r,t=d-e.sigBytes%d,n=t<<24|t<<16|t<<8|t,v=[],b=0;b<t;b+=4)v.push(n);var M=m.create(v,t);e.concat(M)},unpad:function(e){var r=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=r}},_=(s.BlockCipher=B.extend({cfg:B.cfg.extend({mode:i,padding:h}),reset:function(){var e;B.reset.call(this);var r=this.cfg,d=r.iv,t=r.mode;this._xformMode==this._ENC_XFORM_MODE?e=t.createEncryptor:(e=t.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,d&&d.words):(this._mode=e.call(t,this,d&&d.words),this._mode.__creator=e)},_doProcessBlock:function(e,r){this._mode.processBlock(e,r)},_doFinalize:function(){var e,r=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(r.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),r.unpad(e)),e},blockSize:4}),s.CipherParams=f.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),u=(y.format={}).OpenSSL={stringify:function(e){var r=e.ciphertext,d=e.salt;return(d?m.create([1398893684,1701076831]).concat(d).concat(r):r).toString(g)},parse:function(e){var r,d=g.parse(e),t=d.words;return t[0]==1398893684&&t[1]==1701076831&&(r=m.create(t.slice(2,4)),t.splice(0,4),d.sigBytes-=16),_.create({ciphertext:d,salt:r})}},p=s.SerializableCipher=f.extend({cfg:f.extend({format:u}),encrypt:function(e,r,d,t){t=this.cfg.extend(t);var n=e.createEncryptor(d,t),v=n.finalize(r),b=n.cfg;return _.create({ciphertext:v,key:d,iv:b.iv,algorithm:e,mode:b.mode,padding:b.padding,blockSize:e.blockSize,formatter:t.format})},decrypt:function(e,r,d,t){return t=this.cfg.extend(t),r=this._parse(r,t.format),e.createDecryptor(d,t).finalize(r.ciphertext)},_parse:function(e,r){return typeof e=="string"?r.parse(e,this):e}}),c=(y.kdf={}).OpenSSL={execute:function(e,r,d,t){t||(t=m.random(8));var n=C.create({keySize:r+d}).compute(e,t),v=m.create(n.words.slice(r),4*d);return n.sigBytes=4*r,_.create({key:n,iv:v,salt:t})}},k=s.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:c}),encrypt:function(e,r,d,t){var n=(t=this.cfg.extend(t)).kdf.execute(d,e.keySize,e.ivSize);t.iv=n.iv;var v=p.encrypt.call(this,e,r,n.key,t);return v.mixIn(n),v},decrypt:function(e,r,d,t){t=this.cfg.extend(t),r=this._parse(r,t.format);var n=t.kdf.execute(d,e.keySize,e.ivSize,r.salt);return t.iv=n.iv,p.decrypt.call(this,e,r,n.key,t)}})}(),function(){var a=l,y=a.lib.BlockCipher,s=a.algo,f=[],m=[],x=[],w=[],g=[],C=[],B=[],D=[],E=[],i=[];(function(){for(var u=[],p=0;p<256;p++)u[p]=p<128?p<<1:p<<1^283;var c=0,k=0;for(p=0;p<256;p++){var e=k^k<<1^k<<2^k<<3^k<<4;e=e>>>8^255&e^99,f[c]=e,m[e]=c;var r=u[c],d=u[r],t=u[d],n=257*u[e]^16843008*e;x[c]=n<<24|n>>>8,w[c]=n<<16|n>>>16,g[c]=n<<8|n>>>24,C[c]=n,n=16843009*t^65537*d^257*r^16843008*c,B[e]=n<<24|n>>>8,D[e]=n<<16|n>>>16,E[e]=n<<8|n>>>24,i[e]=n,c?(c=r^u[u[u[t^r]]],k^=u[u[k]]):c=k=1}})();var h=[0,1,2,4,8,16,32,64,128,27,54],_=s.AES=y.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var u=this._keyPriorReset=this._key,p=u.words,c=u.sigBytes/4,k=4*((this._nRounds=c+6)+1),e=this._keySchedule=[],r=0;r<k;r++)r<c?e[r]=p[r]:(n=e[r-1],r%c?c>6&&r%c==4&&(n=f[n>>>24]<<24|f[n>>>16&255]<<16|f[n>>>8&255]<<8|f[255&n]):(n=f[(n=n<<8|n>>>24)>>>24]<<24|f[n>>>16&255]<<16|f[n>>>8&255]<<8|f[255&n],n^=h[r/c|0]<<24),e[r]=e[r-c]^n);for(var d=this._invKeySchedule=[],t=0;t<k;t++){if(r=k-t,t%4)var n=e[r];else n=e[r-4];d[t]=t<4||r<=4?n:B[f[n>>>24]]^D[f[n>>>16&255]]^E[f[n>>>8&255]]^i[f[255&n]]}}},encryptBlock:function(u,p){this._doCryptBlock(u,p,this._keySchedule,x,w,g,C,f)},decryptBlock:function(u,p){var c=u[p+1];u[p+1]=u[p+3],u[p+3]=c,this._doCryptBlock(u,p,this._invKeySchedule,B,D,E,i,m),c=u[p+1],u[p+1]=u[p+3],u[p+3]=c},_doCryptBlock:function(u,p,c,k,e,r,d,t){for(var n=this._nRounds,v=u[p]^c[0],b=u[p+1]^c[1],M=u[p+2]^c[2],O=u[p+3]^c[3],z=4,K=1;K<n;K++){var A=k[v>>>24]^e[b>>>16&255]^r[M>>>8&255]^d[255&O]^c[z++],R=k[b>>>24]^e[M>>>16&255]^r[O>>>8&255]^d[255&v]^c[z++],T=k[M>>>24]^e[O>>>16&255]^r[v>>>8&255]^d[255&b]^c[z++],P=k[O>>>24]^e[v>>>16&255]^r[b>>>8&255]^d[255&M]^c[z++];v=A,b=R,M=T,O=P}A=(t[v>>>24]<<24|t[b>>>16&255]<<16|t[M>>>8&255]<<8|t[255&O])^c[z++],R=(t[b>>>24]<<24|t[M>>>16&255]<<16|t[O>>>8&255]<<8|t[255&v])^c[z++],T=(t[M>>>24]<<24|t[O>>>16&255]<<16|t[v>>>8&255]<<8|t[255&b])^c[z++],P=(t[O>>>24]<<24|t[v>>>16&255]<<16|t[b>>>8&255]<<8|t[255&M])^c[z++],u[p]=A,u[p+1]=R,u[p+2]=T,u[p+3]=P},keySize:8});a.AES=y._createHelper(_)}(),l})}S($,"setCrypto");function I(o,l=0,a={}){var x,w,g,C,B,D,E;this.appID=o,this.cipher=l,$(this),this.medalDisplayTime=a.medalDisplayTime||5,this.showPopups=a.showPopups||!0,this.showDescriptions=a.showDescriptions||!0,this.debug=a.debug||!1,this.points=[5,10,25,50,100],this.displayMedalQueue=[];let s=new URL(window.location.href);this.sessionID=(x=s.searchParams.get("ngio_session_id"))!=null?x:0;let f=this.call("ScoreBoard.getBoards",0,0);this.scoreboards=(C=(g=(w=f==null?void 0:f.result)==null?void 0:w.data)==null?void 0:g.scoreboards)!=null?C:[];let m=this.call("Medal.getList",0,0);this.medals=(E=(D=(B=m==null?void 0:m.result)==null?void 0:B.data)==null?void 0:D.medals)!=null?E:[];for(let i of this.medals)i.image=new Image,i.image.src=i.icon,this.debug&&(i.unlocked=0)}S(I,"connect");function F(o){if(!this.medals||!this.medals.find(a=>a.id==o))return;let l=this.medals.find(a=>a.id==o);l.unlocked||(l.unlocked=!0,this.call("Medal.unlock",{id:l.id}))}S(F,"unlockMedal");function U(o){return unescape(o.name+" ("+this.points[o.difficulty-1]+")"+(this.showDescriptions?" - "+o.description:""))}S(U,"getMedalText");function j(o,l=0,a="A",y=0,s=0,f=10){var w,g;if(!this.scoreboards||!this.scoreboards.find(C=>C.id==o))return;let m=this.scoreboards.find(C=>C.id==o);return(g=(w=this.call("ScoreBoard.getScores",{id:m.id,user:l,period:a,social:y,skip:s,limit:f},0).result)==null?void 0:w.data)==null?void 0:g.scores}S(j,"getScores");function J(o,l){if(!this.scoreboards||!this.scoreboards.find(y=>y.id==o))return;let a=this.scoreboards.find(y=>y.id==o);this.call("ScoreBoard.postScore",{id:a.id,value:l})}S(J,"postScore");function Z(o,l,a,y,s,f=.5){if(!this.medals||!this.medals.find(g=>g.id==l))return;o.save(),o.fillStyle="#fff",o.strokeStyle="#000",o.shadowColor="#000",o.textBaseline="middle",o.textAlign="left",o.font=s/2+"px impact",o.lineWidth=s/35,o.shadowBlur=s/5,o.globalAlpha=f;let m=this.medals.find(g=>g.id==l);o.drawImage(m.image,a,y,s,s),o.strokeRect(a,y,s,s);let x=this.points[m.difficulty-1],w=this.getMedalText(m);o.lineWidth=Math.max(1,s/26),o.strokeText(w,a+s*1.2,y+s/2),o.fillText(w,a+s*1.2,y+s/2),o.restore()}S(Z,"renderMedal");function L(o){var l;if((l=this.displayMedalQueue)==null?void 0:l.length){let a=this.displayMedalQueue[0];a.time+=o,a.time>this.medalDisplayTime&&this.displayMedalQueue.shift()}}S(L,"update");function N(o,l=50){var a;if((a=this.displayMedalQueue)==null?void 0:a.length){let y=this.displayMedalQueue[0],s=y.time<1?1-y.time:0,f=y.time>this.medalDisplayTime-1?this.medalDisplayTime-y.time:1,m=o.canvas.height+s*l*1.5;Z(o,y.index,0,m-l,l,f)}}S(N,"render");function X(){var l,a,y,s;let o=this.call("App.checkSession");return(s=(y=(a=(l=o==null?void 0:o.result)==null?void 0:l.data)==null?void 0:a.session)==null?void 0:y.user)==null?void 0:s.name}S(X,"getUsername");function G(){var l,a;let o=this.call("App.getCurrentVersion");return(a=(l=o==null?void 0:o.result)==null?void 0:l.data)==null?void 0:a.current_version}S(G,"getVersion");function H(){var l,a,y,s;let o=this.call("App.checkSession");return(s=(y=(a=(l=o==null?void 0:o.result)==null?void 0:l.data)==null?void 0:a.session)==null?void 0:y.user)==null?void 0:s.supporter}S(H,"isSupporter");function Q(o){if(!this.cipher)return o;let l=this.CryptoJS.enc.Base64.parse(this.cipher),a=this.CryptoJS.lib.WordArray.random(16),y=this.CryptoJS.AES.encrypt(JSON.stringify(o),l,{iv:a}),s=this.CryptoJS.enc.Base64.stringify(a.concat(y.ciphertext));return o.secure=s,o.parameters=null,o}S(Q,"encryptCall");function V(o,l=!1,a=!0){let y=this.encryptCall({component:o,parameters:l}),s={app_id:this.appID,session_id:this.sessionID,call:y},f=new FormData;f.append("input",JSON.stringify(s));let m=new XMLHttpRequest,x="https://newgrounds.io/gateway_v3.php";if(m.open("POST",x,this.debug?!1:a),m.send(f),m.responseText)return this.debug&&console.log(m.responseText),this.responseText=m.responseText,JSON.parse(m.responseText)}S(V,"call");function W(o){var y,s,f;let l=this.call("CloudSave.loadSlot",{id:o},!1),a=new XMLHttpRequest;return a.open("GET",(f=(s=(y=l==null?void 0:l.result)==null?void 0:y.data)==null?void 0:s.slot)==null?void 0:f.url,!1),a.send(),a.status==200?a.responseText:"nope."}S(W,"getCloudData");function q(o,l){return this.call("CloudSave.setData",{id:o,data:l})}S(q,"setCloudData");var ee={connect:I,unlockMedal:F,getMedalText:U,getScores:j,postScore:J,update:L,render:N,getUsername:X,getVersion:G,isSupporter:H,call:V,encryptCall:Q,getCloudData:W,setCloudData:q};window.Connect=I;window.UnlockMedal=F;window.GetMedalText=U;window.GetScores=j;window.PostScore=J;window.update=L;window.render=N;window.GetUsername=X;window.GetVersion=G;window.IsSupporter=H;window.GetCloudData=W;window.SetCloudData=q;window.call=V;window.encryptCall=Q;module.exports=ee;
