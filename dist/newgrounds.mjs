var J=Object.defineProperty;var z=(n,c)=>J(n,"name",{value:c,configurable:!0}),T=(n=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(n,{get:(c,l)=>(typeof require!="undefined"?require:c)[l]}):n)(function(n){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+n+'" is not supported')});var L=(n,c)=>()=>(c||n((c={exports:{}}).exports,c),c.exports);var X=L((F,I)=>{var N={Init(n,c=0,l=0){var y,S,m,w,k,x,M;this.app_id=n,this.cipher=c,this.medalDisplayTime=5,this.showPopups=1,this.showDescriptions=1,this.points=[5,10,25,50,100],this.displayMedalQueue=[],this.debug=l;let o=new URL(window.location.href);this.session_id=(y=o.searchParams.get("ngio_session_id"))!=null?y:0;let a=this.Call("ScoreBoard.getBoards",0,0);this.scoreboards=(w=(m=(S=a==null?void 0:a.result)==null?void 0:S.data)==null?void 0:m.scoreboards)!=null?w:[];let v=this.Call("Medal.getList",0,0);this.medals=(M=(x=(k=v==null?void 0:v.result)==null?void 0:k.data)==null?void 0:x.medals)!=null?M:[];for(let i of this.medals)i.image=new Image,i.image.src=i.icon,this.debug&&(i.unlocked=0)},Update(n){var c;if((c=this.displayMedalQueue)==null?void 0:c.length){let l=this.displayMedalQueue[0];l.time+=n,l.time>this.medalDisplayTime&&this.displayMedalQueue.shift()}},Render(n,c=50){var l;if((l=this.displayMedalQueue)==null?void 0:l.length){let o=this.displayMedalQueue[0],a=o.time<1?1-o.time:0,v=o.time>this.medalDisplayTime-1?this.medalDisplayTime-o.time:1,y=n.canvas.height+a*c*1.5;this.RenderMedal(n,o.index,0,y-c,c,v)}},RenderMedal(n,c,l,o,a,v=.5){if(!this.medals||!this.medals.find(w=>w.id==c))return;n.save(),n.fillStyle="#fff",n.strokeStyle="#000",n.shadowColor="#000",n.textBaseline="middle",n.textAlign="left",n.font=a/2+"px impact",n.lineWidth=a/35,n.shadowBlur=a/5,n.globalAlpha=v;let y=this.medals.find(w=>w.id==c);n.drawImage(y.image,l,o,a,a),n.strokeRect(l,o,a,a);let S=this.points[y.difficulty-1],m=this.GetMedalDisplayText(y);n.lineWidth=Math.max(1,a/26),n.strokeText(m,l+a*1.2,o+a/2),n.fillText(m,l+a*1.2,o+a/2),n.restore()},UnlockMedal(n){if(!this.medals||!this.medals.find(l=>l.id==n))return;let c=this.medals.find(l=>l.id==n);c.unlocked||(c.unlocked=!0,this.Call("Medal.unlock",{id:c.id}))},PostScore(n,c){if(!this.scoreboards||!this.scoreboards.find(o=>o.id==n))return;let l=this.scoreboards.find(o=>o.id==n);this.Call("ScoreBoard.postScore",{id:l.id,value:c})},GetScores(n,c=0,l="A",o=0,a=0,v=10){var m,w;if(!this.scoreboards||!this.scoreboards.find(k=>k.id==n))return;let y=this.scoreboards.find(k=>k.id==n);return(w=(m=this.Call("ScoreBoard.getScores",{id:y.id,user:c,period:l,social:o,skip:a,limit:v},0).result)==null?void 0:m.data)==null?void 0:w.scores},Username(){var c,l,o,a;let n=this.Call("App.checkSession");return(a=(o=(l=(c=n==null?void 0:n.result)==null?void 0:c.data)==null?void 0:l.session)==null?void 0:o.user)==null?void 0:a.name},Version(){var c,l;let n=this.Call("App.getCurrentVersion");return(l=(c=n==null?void 0:n.result)==null?void 0:c.data)==null?void 0:l.current_version},IsSupporter(){var c,l,o,a;let n=this.Call("App.checkSession");return(a=(o=(l=(c=n==null?void 0:n.result)==null?void 0:c.data)==null?void 0:l.session)==null?void 0:o.user)==null?void 0:a.supporter},Call(n,c=0,l=1){let o=this.EncryptCall({component:n,parameters:c}),a={app_id:this.app_id,session_id:this.session_id,call:o},v=new FormData;v.append("input",JSON.stringify(a));let y=new XMLHttpRequest,S="https://newgrounds.io/gateway_v3.php";if(y.open("POST",S,this.debug?0:l),y.send(v),y.responseText)return this.debug&&console.log(y.responseText),this.responseText=y.responseText,JSON.parse(y.responseText)},EncryptCall(n){if(!this.cipher)return n;let c=this.CryptoJS.enc.Base64.parse(this.cipher),l=this.CryptoJS.lib.WordArray.random(16),o=this.CryptoJS.AES.encrypt(JSON.stringify(n),c,{iv:l}),a=this.CryptoJS.enc.Base64.stringify(l.concat(o.ciphertext));return n.secure=a,n.parameters=null,n}};(function(n,c){typeof F=="object"?I.exports=F=c():typeof define=="function"&&define.amd?define([],c):N.CryptoJS=c()})(0,function(){var n=n||function(c,l){var o;if(typeof window!="undefined"&&window.crypto&&(o=window.crypto),!o&&typeof window!="undefined"&&window.msCrypto&&(o=window.msCrypto),!o&&typeof global!="undefined"&&global.crypto&&(o=global.crypto),!o&&typeof T=="function")try{o=T("crypto")}catch(i){}var a=z(function(){if(o){if(typeof o.getRandomValues=="function")try{return o.getRandomValues(new Uint32Array(1))[0]}catch(i){}if(typeof o.randomBytes=="function")try{return o.randomBytes(4).readInt32LE()}catch(i){}}throw new Error("Native crypto module could not be used to get secure random number.")},"i"),v=Object.create||function(){function i(){}return z(i,"t"),function(f){var _;return i.prototype=f,_=new i,i.prototype=null,_}}(),y={},S=y.lib={},m=S.Base={extend:function(i){var f=v(this);return i&&f.mixIn(i),f.hasOwnProperty("init")&&this.init!==f.init||(f.init=function(){f.$super.init.apply(this,arguments)}),f.init.prototype=f,f.$super=this,f},create:function(){var i=this.extend();return i.init.apply(i,arguments),i},init:function(){},mixIn:function(i){for(var f in i)i.hasOwnProperty(f)&&(this[f]=i[f]);i.hasOwnProperty("toString")&&(this.toString=i.toString)},clone:function(){return this.init.prototype.extend(this)}},w=S.WordArray=m.extend({init:function(i,f){i=this.words=i||[],this.sigBytes=f!=null?f:4*i.length},toString:function(i){return(i||Hex).stringify(this)},concat:function(i){var f=this.words,_=i.words,u=this.sigBytes,p=i.sigBytes;if(this.clamp(),u%4)for(var d=0;d<p;d++){var B=_[d>>>2]>>>24-d%4*8&255;f[u+d>>>2]|=B<<24-(u+d)%4*8}else for(d=0;d<p;d+=4)f[u+d>>>2]=_[d>>>2];return this.sigBytes+=p,this},clamp:function(){var i=this.words,f=this.sigBytes;i[f>>>2]&=4294967295<<32-f%4*8,i.length=c.ceil(f/4)},clone:function(){var i=m.clone.call(this);return i.words=this.words.slice(0),i},random:function(i){for(var f=[],_=0;_<i;_+=4)f.push(a());return new w.init(f,i)}}),k=y.enc={},x=k.Latin1={stringify:function(i){for(var f=i.words,_=i.sigBytes,u=[],p=0;p<_;p++){var d=f[p>>>2]>>>24-p%4*8&255;u.push(String.fromCharCode(d))}return u.join("")},parse:function(i){for(var f=i.length,_=[],u=0;u<f;u++)_[u>>>2]|=(255&i.charCodeAt(u))<<24-u%4*8;return new w.init(_,f)}},M=k.Utf8={stringify:function(i){try{return decodeURIComponent(escape(x.stringify(i)))}catch(f){throw new Error("Malformed UTF-8 data")}},parse:function(i){return x.parse(unescape(encodeURIComponent(i)))}};return S.BufferedBlockAlgorithm=m.extend({reset:function(){this._data=new w.init,this._nDataBytes=0},_append:function(i){typeof i=="string"&&(i=M.parse(i)),this._data.concat(i),this._nDataBytes+=i.sigBytes},_process:function(i){var f,_=this._data,u=_.words,p=_.sigBytes,d=this.blockSize,B=p/(4*d),e=(B=i?c.ceil(B):c.max((0|B)-this._minBufferSize,0))*d,r=c.min(4*e,p);if(e){for(var h=0;h<e;h+=d)this._doProcessBlock(u,h);f=u.splice(0,e),_.sigBytes-=r}return new w.init(f,r)},clone:function(){var i=m.clone.call(this);return i._data=this._data.clone(),i},_minBufferSize:0}),y.algo={},y}(Math);return function(){var c=n,l=c.lib.WordArray;c.enc.Base64={stringify:function(o){var a=o.words,v=o.sigBytes,y=this._map;o.clamp();for(var S=[],m=0;m<v;m+=3)for(var w=(a[m>>>2]>>>24-m%4*8&255)<<16|(a[m+1>>>2]>>>24-(m+1)%4*8&255)<<8|a[m+2>>>2]>>>24-(m+2)%4*8&255,k=0;k<4&&m+.75*k<v;k++)S.push(y.charAt(w>>>6*(3-k)&63));var x=y.charAt(64);if(x)for(;S.length%4;)S.push(x);return S.join("")},parse:function(o){var a=o.length,v=this._map,y=this._reverseMap;if(!y){y=this._reverseMap=[];for(var S=0;S<v.length;S++)y[v.charCodeAt(S)]=S}var m=v.charAt(64);if(m){var w=o.indexOf(m);w!==-1&&(a=w)}return function(k,x,M){for(var i=[],f=0,_=0;_<x;_++)if(_%4){var u=M[k.charCodeAt(_-1)]<<_%4*2,p=M[k.charCodeAt(_)]>>>6-_%4*2,d=u|p;i[f>>>2]|=d<<24-f%4*8,f++}return l.create(i,f)}(o,a,y)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),n.lib.Cipher||function(c){var l=n,o=l.lib,a=o.Base,v=o.WordArray,y=o.BufferedBlockAlgorithm,S=l.enc,m=(S.Utf8,S.Base64),w=l.algo.EvpKDF,k=o.Cipher=y.extend({cfg:a.extend(),createEncryptor:function(e,r){return this.create(this._ENC_XFORM_MODE,e,r)},createDecryptor:function(e,r){return this.create(this._DEC_XFORM_MODE,e,r)},init:function(e,r,h){this.cfg=this.cfg.extend(h),this._xformMode=e,this._key=r,this.reset()},reset:function(){y.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(r){return typeof r=="string"?B:p}return z(e,"t"),function(r){return{encrypt:function(h,t,s){return e(t).encrypt(r,h,t,s)},decrypt:function(h,t,s){return e(t).decrypt(r,h,t,s)}}}}()}),x=(o.StreamCipher=k.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),l.mode={}),M=o.BlockCipherMode=a.extend({createEncryptor:function(e,r){return this.Encryptor.create(e,r)},createDecryptor:function(e,r){return this.Decryptor.create(e,r)},init:function(e,r){this._cipher=e,this._iv=r}}),i=x.CBC=function(){var e=M.extend();function r(h,t,s){var g,C=this._iv;C?(g=C,this._iv=c):g=this._prevBlock;for(var b=0;b<s;b++)h[t+b]^=g[b]}return z(r,"r"),e.Encryptor=e.extend({processBlock:function(h,t){var s=this._cipher,g=s.blockSize;r.call(this,h,t,g),s.encryptBlock(h,t),this._prevBlock=h.slice(t,t+g)}}),e.Decryptor=e.extend({processBlock:function(h,t){var s=this._cipher,g=s.blockSize,C=h.slice(t,t+g);s.decryptBlock(h,t),r.call(this,h,t,g),this._prevBlock=C}}),e}(),f=(l.pad={}).Pkcs7={pad:function(e,r){for(var h=4*r,t=h-e.sigBytes%h,s=t<<24|t<<16|t<<8|t,g=[],C=0;C<t;C+=4)g.push(s);var b=v.create(g,t);e.concat(b)},unpad:function(e){var r=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=r}},_=(o.BlockCipher=k.extend({cfg:k.cfg.extend({mode:i,padding:f}),reset:function(){var e;k.reset.call(this);var r=this.cfg,h=r.iv,t=r.mode;this._xformMode==this._ENC_XFORM_MODE?e=t.createEncryptor:(e=t.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,h&&h.words):(this._mode=e.call(t,this,h&&h.words),this._mode.__creator=e)},_doProcessBlock:function(e,r){this._mode.processBlock(e,r)},_doFinalize:function(){var e,r=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(r.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),r.unpad(e)),e},blockSize:4}),o.CipherParams=a.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),u=(l.format={}).OpenSSL={stringify:function(e){var r=e.ciphertext,h=e.salt;return(h?v.create([1398893684,1701076831]).concat(h).concat(r):r).toString(m)},parse:function(e){var r,h=m.parse(e),t=h.words;return t[0]==1398893684&&t[1]==1701076831&&(r=v.create(t.slice(2,4)),t.splice(0,4),h.sigBytes-=16),_.create({ciphertext:h,salt:r})}},p=o.SerializableCipher=a.extend({cfg:a.extend({format:u}),encrypt:function(e,r,h,t){t=this.cfg.extend(t);var s=e.createEncryptor(h,t),g=s.finalize(r),C=s.cfg;return _.create({ciphertext:g,key:h,iv:C.iv,algorithm:e,mode:C.mode,padding:C.padding,blockSize:e.blockSize,formatter:t.format})},decrypt:function(e,r,h,t){return t=this.cfg.extend(t),r=this._parse(r,t.format),e.createDecryptor(h,t).finalize(r.ciphertext)},_parse:function(e,r){return typeof e=="string"?r.parse(e,this):e}}),d=(l.kdf={}).OpenSSL={execute:function(e,r,h,t){t||(t=v.random(8));var s=w.create({keySize:r+h}).compute(e,t),g=v.create(s.words.slice(r),4*h);return s.sigBytes=4*r,_.create({key:s,iv:g,salt:t})}},B=o.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:d}),encrypt:function(e,r,h,t){var s=(t=this.cfg.extend(t)).kdf.execute(h,e.keySize,e.ivSize);t.iv=s.iv;var g=p.encrypt.call(this,e,r,s.key,t);return g.mixIn(s),g},decrypt:function(e,r,h,t){t=this.cfg.extend(t),r=this._parse(r,t.format);var s=t.kdf.execute(h,e.keySize,e.ivSize,r.salt);return t.iv=s.iv,p.decrypt.call(this,e,r,s.key,t)}})}(),function(){var c=n,l=c.lib.BlockCipher,o=c.algo,a=[],v=[],y=[],S=[],m=[],w=[],k=[],x=[],M=[],i=[];(function(){for(var u=[],p=0;p<256;p++)u[p]=p<128?p<<1:p<<1^283;var d=0,B=0;for(p=0;p<256;p++){var e=B^B<<1^B<<2^B<<3^B<<4;e=e>>>8^255&e^99,a[d]=e,v[e]=d;var r=u[d],h=u[r],t=u[h],s=257*u[e]^16843008*e;y[d]=s<<24|s>>>8,S[d]=s<<16|s>>>16,m[d]=s<<8|s>>>24,w[d]=s,s=16843009*t^65537*h^257*r^16843008*d,k[e]=s<<24|s>>>8,x[e]=s<<16|s>>>16,M[e]=s<<8|s>>>24,i[e]=s,d?(d=r^u[u[u[t^r]]],B^=u[u[B]]):d=B=1}})();var f=[0,1,2,4,8,16,32,64,128,27,54],_=o.AES=l.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var u=this._keyPriorReset=this._key,p=u.words,d=u.sigBytes/4,B=4*((this._nRounds=d+6)+1),e=this._keySchedule=[],r=0;r<B;r++)r<d?e[r]=p[r]:(s=e[r-1],r%d?d>6&&r%d==4&&(s=a[s>>>24]<<24|a[s>>>16&255]<<16|a[s>>>8&255]<<8|a[255&s]):(s=a[(s=s<<8|s>>>24)>>>24]<<24|a[s>>>16&255]<<16|a[s>>>8&255]<<8|a[255&s],s^=f[r/d|0]<<24),e[r]=e[r-d]^s);for(var h=this._invKeySchedule=[],t=0;t<B;t++){if(r=B-t,t%4)var s=e[r];else s=e[r-4];h[t]=t<4||r<=4?s:k[a[s>>>24]]^x[a[s>>>16&255]]^M[a[s>>>8&255]]^i[a[255&s]]}}},encryptBlock:function(u,p){this._doCryptBlock(u,p,this._keySchedule,y,S,m,w,a)},decryptBlock:function(u,p){var d=u[p+1];u[p+1]=u[p+3],u[p+3]=d,this._doCryptBlock(u,p,this._invKeySchedule,k,x,M,i,v),d=u[p+1],u[p+1]=u[p+3],u[p+3]=d},_doCryptBlock:function(u,p,d,B,e,r,h,t){for(var s=this._nRounds,g=u[p]^d[0],C=u[p+1]^d[1],b=u[p+2]^d[2],E=u[p+3]^d[3],D=4,U=1;U<s;U++){var O=B[g>>>24]^e[C>>>16&255]^r[b>>>8&255]^h[255&E]^d[D++],A=B[C>>>24]^e[b>>>16&255]^r[E>>>8&255]^h[255&g]^d[D++],R=B[b>>>24]^e[E>>>16&255]^r[g>>>8&255]^h[255&C]^d[D++],P=B[E>>>24]^e[g>>>16&255]^r[C>>>8&255]^h[255&b]^d[D++];g=O,C=A,b=R,E=P}O=(t[g>>>24]<<24|t[C>>>16&255]<<16|t[b>>>8&255]<<8|t[255&E])^d[D++],A=(t[C>>>24]<<24|t[b>>>16&255]<<16|t[E>>>8&255]<<8|t[255&g])^d[D++],R=(t[b>>>24]<<24|t[E>>>16&255]<<16|t[g>>>8&255]<<8|t[255&C])^d[D++],P=(t[E>>>24]<<24|t[g>>>16&255]<<16|t[C>>>8&255]<<8|t[255&b])^d[D++],u[p]=O,u[p+1]=A,u[p+2]=R,u[p+3]=P},keySize:8});c.AES=l._createHelper(_)}(),n});I.exports=N});export default X();
//# sourceMappingURL=newgrounds.mjs.map
