var newgrounds=(()=>{var ne=Object.defineProperty;var x=(i,o)=>ne(i,"name",{value:o,configurable:!0}),I=(i=>typeof require!="undefined"?require:typeof Proxy!="undefined"?new Proxy(i,{get:(o,h)=>(typeof require!="undefined"?require:o)[h]}):i)(function(i){if(typeof require!="undefined")return require.apply(this,arguments);throw new Error('Dynamic require of "'+i+'" is not supported')});var O=(i,o)=>()=>(i&&(o=i(i=0)),o);var se=(i,o)=>()=>(o||i((o={exports:{}}).exports,o),o.exports);function N(i,o=0,h){var y,S,m,w,k,C,D;this.appID=i,this.cipher=o,this.medalDisplayTime=h.medalDisplayTime||5,this.showPopups=h.showPopups||!0,this.showDescriptions=h.showDescriptions||!0,this.debug=h.debug||!1,this.points=[5,10,25,50,100],this.displayMedalQueue=[];let a=new URL(window.location.href);this.sessionID=(y=a.searchParams.get("ngio_session_id"))!=null?y:0;let c=this.call("ScoreBoard.getBoards",0,0);this.scoreboards=(w=(m=(S=c==null?void 0:c.result)==null?void 0:S.data)==null?void 0:m.scoreboards)!=null?w:[];let g=this.call("Medal.getList",0,0);this.medals=(D=(C=(k=g==null?void 0:g.result)==null?void 0:k.data)==null?void 0:C.medals)!=null?D:[];for(let n of this.medals)n.image=new Image,n.image.src=n.icon,this.debug&&(n.unlocked=0)}var L=O(()=>{x(N,"init")});function U(i){if(!this.medals||!this.medals.find(h=>h.id==i))return;let o=this.medals.find(h=>h.id==i);o.unlocked||(o.unlocked=!0,this.call("Medal.unlock",{id:o.id}))}function X(i){return unescape(i.name+" ("+this.points[i.difficulty-1]+")"+(this.showDescriptions?" - "+i.description:""))}var Q=O(()=>{x(U,"unlockMedal");x(X,"getMedalText")});function W(i,o=0,h="A",a=0,c=0,g=10){var m,w;if(!this.scoreboards||!this.scoreboards.find(k=>k.id==i))return;let y=this.scoreboards.find(k=>k.id==i);return(w=(m=this.call("ScoreBoard.getScores",{id:y.id,user:o,period:h,social:a,skip:c,limit:g},0).result)==null?void 0:m.data)==null?void 0:w.scores}function H(i,o){if(!this.scoreboards||!this.scoreboards.find(a=>a.id==i))return;let h=this.scoreboards.find(a=>a.id==i);this.call("ScoreBoard.postScore",{id:h.id,value:o})}var K=O(()=>{x(W,"getScores");x(H,"postScore")});function oe(i,o,h,a,c,g=.5){if(!this.medals||!this.medals.find(w=>w.id==o))return;i.save(),i.fillStyle="#fff",i.strokeStyle="#000",i.shadowColor="#000",i.textBaseline="middle",i.textAlign="left",i.font=c/2+"px impact",i.lineWidth=c/35,i.shadowBlur=c/5,i.globalAlpha=g;let y=this.medals.find(w=>w.id==o);i.drawImage(y.image,h,a,c,c),i.strokeRect(h,a,c,c);let S=this.points[y.difficulty-1],m=this.getMedalText(y);i.lineWidth=Math.max(1,c/26),i.strokeText(m,h+c*1.2,a+c/2),i.fillText(m,h+c*1.2,a+c/2),i.restore()}function q(i){var o;if((o=this.displayMedalQueue)==null?void 0:o.length){let h=this.displayMedalQueue[0];h.time+=i,h.time>this.medalDisplayTime&&this.displayMedalQueue.shift()}}function V(i,o=50){var h;if((h=this.displayMedalQueue)==null?void 0:h.length){let a=this.displayMedalQueue[0],c=a.time<1?1-a.time:0,g=a.time>this.medalDisplayTime-1?this.medalDisplayTime-a.time:1,y=i.canvas.height+c*o*1.5;oe(i,a.index,0,y-o,o,g)}}var $=O(()=>{x(oe,"renderMedal");x(q,"update");x(V,"render")});function G(){var o,h,a,c;let i=this.call("App.checkSession");return(c=(a=(h=(o=i==null?void 0:i.result)==null?void 0:o.data)==null?void 0:h.session)==null?void 0:a.user)==null?void 0:c.name}function Y(){var o,h;let i=this.call("App.getCurrentVersion");return(h=(o=i==null?void 0:i.result)==null?void 0:o.data)==null?void 0:h.current_version}function Z(){var o,h,a,c;let i=this.call("App.checkSession");return(c=(a=(h=(o=i==null?void 0:i.result)==null?void 0:o.data)==null?void 0:h.session)==null?void 0:a.user)==null?void 0:c.supporter}var ee=O(()=>{x(G,"username");x(Y,"version");x(Z,"isSupporter")});function ae(i){if(!this.cipher)return i;let o=this.CryptoJS.enc.Base64.parse(this.cipher),h=this.CryptoJS.lib.WordArray.random(16),a=this.CryptoJS.AES.encrypt(JSON.stringify(i),o,{iv:h}),c=this.CryptoJS.enc.Base64.stringify(h.concat(a.ciphertext));return i.secure=c,i.parameters=null,i}function te(i,o=0,h=1){let a=ae({component:i,parameters:o}),c={app_id:this.appID,session_id:this.sessionID,call:a},g=new FormData;g.append("input",JSON.stringify(c));let y=new XMLHttpRequest,S="https://newgrounds.io/gateway_v3.php";if(y.open("POST",S,this.debug?0:h),y.send(g),y.responseText)return this.debug&&console.log(y.responseText),this.responseText=y.responseText,JSON.parse(y.responseText)}var re=O(()=>{x(ae,"encryptCall");x(te,"call")});var ce=se((F,j)=>{L();Q();K();$();ee();re();var ie={init:N,unlockMedal:U,getMedalText:X,getScores:W,postScore:H,update:q,render:V,username:G,version:Y,isSuporter:Z,call:te};(function(i,o){typeof F=="object"?j.exports=F=o():typeof define=="function"&&define.amd?define([],o):ie.CryptoJS=o()})(0,function(){var i=i||function(o,h){var a;if(typeof window!="undefined"&&window.crypto&&(a=window.crypto),!a&&typeof window!="undefined"&&window.msCrypto&&(a=window.msCrypto),!a&&typeof global!="undefined"&&global.crypto&&(a=global.crypto),!a&&typeof I=="function")try{a=I("crypto")}catch(n){}var c=x(function(){if(a){if(typeof a.getRandomValues=="function")try{return a.getRandomValues(new Uint32Array(1))[0]}catch(n){}if(typeof a.randomBytes=="function")try{return a.randomBytes(4).readInt32LE()}catch(n){}}throw new Error("Native crypto module could not be used to get secure random number.")},"i"),g=Object.create||function(){function n(){}return x(n,"t"),function(f){var _;return n.prototype=f,_=new n,n.prototype=null,_}}(),y={},S=y.lib={},m=S.Base={extend:function(n){var f=g(this);return n&&f.mixIn(n),f.hasOwnProperty("init")&&this.init!==f.init||(f.init=function(){f.$super.init.apply(this,arguments)}),f.init.prototype=f,f.$super=this,f},create:function(){var n=this.extend();return n.init.apply(n,arguments),n},init:function(){},mixIn:function(n){for(var f in n)n.hasOwnProperty(f)&&(this[f]=n[f]);n.hasOwnProperty("toString")&&(this.toString=n.toString)},clone:function(){return this.init.prototype.extend(this)}},w=S.WordArray=m.extend({init:function(n,f){n=this.words=n||[],this.sigBytes=f!=null?f:4*n.length},toString:function(n){return(n||Hex).stringify(this)},concat:function(n){var f=this.words,_=n.words,p=this.sigBytes,l=n.sigBytes;if(this.clamp(),p%4)for(var d=0;d<l;d++){var B=_[d>>>2]>>>24-d%4*8&255;f[p+d>>>2]|=B<<24-(p+d)%4*8}else for(d=0;d<l;d+=4)f[p+d>>>2]=_[d>>>2];return this.sigBytes+=l,this},clamp:function(){var n=this.words,f=this.sigBytes;n[f>>>2]&=4294967295<<32-f%4*8,n.length=o.ceil(f/4)},clone:function(){var n=m.clone.call(this);return n.words=this.words.slice(0),n},random:function(n){for(var f=[],_=0;_<n;_+=4)f.push(c());return new w.init(f,n)}}),k=y.enc={},C=k.Latin1={stringify:function(n){for(var f=n.words,_=n.sigBytes,p=[],l=0;l<_;l++){var d=f[l>>>2]>>>24-l%4*8&255;p.push(String.fromCharCode(d))}return p.join("")},parse:function(n){for(var f=n.length,_=[],p=0;p<f;p++)_[p>>>2]|=(255&n.charCodeAt(p))<<24-p%4*8;return new w.init(_,f)}},D=k.Utf8={stringify:function(n){try{return decodeURIComponent(escape(C.stringify(n)))}catch(f){throw new Error("Malformed UTF-8 data")}},parse:function(n){return C.parse(unescape(encodeURIComponent(n)))}};return S.BufferedBlockAlgorithm=m.extend({reset:function(){this._data=new w.init,this._nDataBytes=0},_append:function(n){typeof n=="string"&&(n=D.parse(n)),this._data.concat(n),this._nDataBytes+=n.sigBytes},_process:function(n){var f,_=this._data,p=_.words,l=_.sigBytes,d=this.blockSize,B=l/(4*d),e=(B=n?o.ceil(B):o.max((0|B)-this._minBufferSize,0))*d,r=o.min(4*e,l);if(e){for(var u=0;u<e;u+=d)this._doProcessBlock(p,u);f=p.splice(0,e),_.sigBytes-=r}return new w.init(f,r)},clone:function(){var n=m.clone.call(this);return n._data=this._data.clone(),n},_minBufferSize:0}),y.algo={},y}(Math);return function(){var o=i,h=o.lib.WordArray;o.enc.Base64={stringify:function(a){var c=a.words,g=a.sigBytes,y=this._map;a.clamp();for(var S=[],m=0;m<g;m+=3)for(var w=(c[m>>>2]>>>24-m%4*8&255)<<16|(c[m+1>>>2]>>>24-(m+1)%4*8&255)<<8|c[m+2>>>2]>>>24-(m+2)%4*8&255,k=0;k<4&&m+.75*k<g;k++)S.push(y.charAt(w>>>6*(3-k)&63));var C=y.charAt(64);if(C)for(;S.length%4;)S.push(C);return S.join("")},parse:function(a){var c=a.length,g=this._map,y=this._reverseMap;if(!y){y=this._reverseMap=[];for(var S=0;S<g.length;S++)y[g.charCodeAt(S)]=S}var m=g.charAt(64);if(m){var w=a.indexOf(m);w!==-1&&(c=w)}return function(k,C,D){for(var n=[],f=0,_=0;_<C;_++)if(_%4){var p=D[k.charCodeAt(_-1)]<<_%4*2,l=D[k.charCodeAt(_)]>>>6-_%4*2,d=p|l;n[f>>>2]|=d<<24-f%4*8,f++}return h.create(n,f)}(a,c,y)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),i.lib.Cipher||function(o){var h=i,a=h.lib,c=a.Base,g=a.WordArray,y=a.BufferedBlockAlgorithm,S=h.enc,m=(S.Utf8,S.Base64),w=h.algo.EvpKDF,k=a.Cipher=y.extend({cfg:c.extend(),createEncryptor:function(e,r){return this.create(this._ENC_XFORM_MODE,e,r)},createDecryptor:function(e,r){return this.create(this._DEC_XFORM_MODE,e,r)},init:function(e,r,u){this.cfg=this.cfg.extend(u),this._xformMode=e,this._key=r,this.reset()},reset:function(){y.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){return e&&this._append(e),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(r){return typeof r=="string"?B:l}return x(e,"t"),function(r){return{encrypt:function(u,t,s){return e(t).encrypt(r,u,t,s)},decrypt:function(u,t,s){return e(t).decrypt(r,u,t,s)}}}}()}),C=(a.StreamCipher=k.extend({_doFinalize:function(){return this._process(!0)},blockSize:1}),h.mode={}),D=a.BlockCipherMode=c.extend({createEncryptor:function(e,r){return this.Encryptor.create(e,r)},createDecryptor:function(e,r){return this.Decryptor.create(e,r)},init:function(e,r){this._cipher=e,this._iv=r}}),n=C.CBC=function(){var e=D.extend();function r(u,t,s){var v,b=this._iv;b?(v=b,this._iv=o):v=this._prevBlock;for(var M=0;M<s;M++)u[t+M]^=v[M]}return x(r,"r"),e.Encryptor=e.extend({processBlock:function(u,t){var s=this._cipher,v=s.blockSize;r.call(this,u,t,v),s.encryptBlock(u,t),this._prevBlock=u.slice(t,t+v)}}),e.Decryptor=e.extend({processBlock:function(u,t){var s=this._cipher,v=s.blockSize,b=u.slice(t,t+v);s.decryptBlock(u,t),r.call(this,u,t,v),this._prevBlock=b}}),e}(),f=(h.pad={}).Pkcs7={pad:function(e,r){for(var u=4*r,t=u-e.sigBytes%u,s=t<<24|t<<16|t<<8|t,v=[],b=0;b<t;b+=4)v.push(s);var M=g.create(v,t);e.concat(M)},unpad:function(e){var r=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=r}},_=(a.BlockCipher=k.extend({cfg:k.cfg.extend({mode:n,padding:f}),reset:function(){var e;k.reset.call(this);var r=this.cfg,u=r.iv,t=r.mode;this._xformMode==this._ENC_XFORM_MODE?e=t.createEncryptor:(e=t.createDecryptor,this._minBufferSize=1),this._mode&&this._mode.__creator==e?this._mode.init(this,u&&u.words):(this._mode=e.call(t,this,u&&u.words),this._mode.__creator=e)},_doProcessBlock:function(e,r){this._mode.processBlock(e,r)},_doFinalize:function(){var e,r=this.cfg.padding;return this._xformMode==this._ENC_XFORM_MODE?(r.pad(this._data,this.blockSize),e=this._process(!0)):(e=this._process(!0),r.unpad(e)),e},blockSize:4}),a.CipherParams=c.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),p=(h.format={}).OpenSSL={stringify:function(e){var r=e.ciphertext,u=e.salt;return(u?g.create([1398893684,1701076831]).concat(u).concat(r):r).toString(m)},parse:function(e){var r,u=m.parse(e),t=u.words;return t[0]==1398893684&&t[1]==1701076831&&(r=g.create(t.slice(2,4)),t.splice(0,4),u.sigBytes-=16),_.create({ciphertext:u,salt:r})}},l=a.SerializableCipher=c.extend({cfg:c.extend({format:p}),encrypt:function(e,r,u,t){t=this.cfg.extend(t);var s=e.createEncryptor(u,t),v=s.finalize(r),b=s.cfg;return _.create({ciphertext:v,key:u,iv:b.iv,algorithm:e,mode:b.mode,padding:b.padding,blockSize:e.blockSize,formatter:t.format})},decrypt:function(e,r,u,t){return t=this.cfg.extend(t),r=this._parse(r,t.format),e.createDecryptor(u,t).finalize(r.ciphertext)},_parse:function(e,r){return typeof e=="string"?r.parse(e,this):e}}),d=(h.kdf={}).OpenSSL={execute:function(e,r,u,t){t||(t=g.random(8));var s=w.create({keySize:r+u}).compute(e,t),v=g.create(s.words.slice(r),4*u);return s.sigBytes=4*r,_.create({key:s,iv:v,salt:t})}},B=a.PasswordBasedCipher=l.extend({cfg:l.cfg.extend({kdf:d}),encrypt:function(e,r,u,t){var s=(t=this.cfg.extend(t)).kdf.execute(u,e.keySize,e.ivSize);t.iv=s.iv;var v=l.encrypt.call(this,e,r,s.key,t);return v.mixIn(s),v},decrypt:function(e,r,u,t){t=this.cfg.extend(t),r=this._parse(r,t.format);var s=t.kdf.execute(u,e.keySize,e.ivSize,r.salt);return t.iv=s.iv,l.decrypt.call(this,e,r,s.key,t)}})}(),function(){var o=i,h=o.lib.BlockCipher,a=o.algo,c=[],g=[],y=[],S=[],m=[],w=[],k=[],C=[],D=[],n=[];(function(){for(var p=[],l=0;l<256;l++)p[l]=l<128?l<<1:l<<1^283;var d=0,B=0;for(l=0;l<256;l++){var e=B^B<<1^B<<2^B<<3^B<<4;e=e>>>8^255&e^99,c[d]=e,g[e]=d;var r=p[d],u=p[r],t=p[u],s=257*p[e]^16843008*e;y[d]=s<<24|s>>>8,S[d]=s<<16|s>>>16,m[d]=s<<8|s>>>24,w[d]=s,s=16843009*t^65537*u^257*r^16843008*d,k[e]=s<<24|s>>>8,C[e]=s<<16|s>>>16,D[e]=s<<8|s>>>24,n[e]=s,d?(d=r^p[p[p[t^r]]],B^=p[p[B]]):d=B=1}})();var f=[0,1,2,4,8,16,32,64,128,27,54],_=a.AES=h.extend({_doReset:function(){if(!this._nRounds||this._keyPriorReset!==this._key){for(var p=this._keyPriorReset=this._key,l=p.words,d=p.sigBytes/4,B=4*((this._nRounds=d+6)+1),e=this._keySchedule=[],r=0;r<B;r++)r<d?e[r]=l[r]:(s=e[r-1],r%d?d>6&&r%d==4&&(s=c[s>>>24]<<24|c[s>>>16&255]<<16|c[s>>>8&255]<<8|c[255&s]):(s=c[(s=s<<8|s>>>24)>>>24]<<24|c[s>>>16&255]<<16|c[s>>>8&255]<<8|c[255&s],s^=f[r/d|0]<<24),e[r]=e[r-d]^s);for(var u=this._invKeySchedule=[],t=0;t<B;t++){if(r=B-t,t%4)var s=e[r];else s=e[r-4];u[t]=t<4||r<=4?s:k[c[s>>>24]]^C[c[s>>>16&255]]^D[c[s>>>8&255]]^n[c[255&s]]}}},encryptBlock:function(p,l){this._doCryptBlock(p,l,this._keySchedule,y,S,m,w,c)},decryptBlock:function(p,l){var d=p[l+1];p[l+1]=p[l+3],p[l+3]=d,this._doCryptBlock(p,l,this._invKeySchedule,k,C,D,n,g),d=p[l+1],p[l+1]=p[l+3],p[l+3]=d},_doCryptBlock:function(p,l,d,B,e,r,u,t){for(var s=this._nRounds,v=p[l]^d[0],b=p[l+1]^d[1],M=p[l+2]^d[2],E=p[l+3]^d[3],z=4,J=1;J<s;J++){var A=B[v>>>24]^e[b>>>16&255]^r[M>>>8&255]^u[255&E]^d[z++],R=B[b>>>24]^e[M>>>16&255]^r[E>>>8&255]^u[255&v]^d[z++],T=B[M>>>24]^e[E>>>16&255]^r[v>>>8&255]^u[255&b]^d[z++],P=B[E>>>24]^e[v>>>16&255]^r[b>>>8&255]^u[255&M]^d[z++];v=A,b=R,M=T,E=P}A=(t[v>>>24]<<24|t[b>>>16&255]<<16|t[M>>>8&255]<<8|t[255&E])^d[z++],R=(t[b>>>24]<<24|t[M>>>16&255]<<16|t[E>>>8&255]<<8|t[255&v])^d[z++],T=(t[M>>>24]<<24|t[E>>>16&255]<<16|t[v>>>8&255]<<8|t[255&b])^d[z++],P=(t[E>>>24]<<24|t[v>>>16&255]<<16|t[b>>>8&255]<<8|t[255&M])^d[z++],p[l]=A,p[l+1]=R,p[l+2]=T,p[l+3]=P},keySize:8});o.AES=h._createHelper(_)}(),i});j.exports=ie});return ce();})();
